![DareBox Logo](./carbon.svg)

DareBox _(dárɛ box)_ is a pre provisioned LAMP vagrant box in the vein of [scotchbox](scotchbox.io), but up to date.

# How to use

## Vagrant Cloud
**TODO:** add box to Hashicorp's vagrantup/vagrantcould so usage would just be adding zwrawr/darebox to your vagrant file

## Cloning the Repo
1. Clone this repo from github. 
2. Run `./darebox.sh build`, this will take a while (10 mins)
3. In your project's Vagrantfile add `/path/to/cloned/repo/output-darebox/package.box` as your source box.  

# What is included

| Item | Version | Notes |
| ---- | ------- | ----- |
| Kernel | 5.4.0 | |
| Ubuntu | 20.04.3 | current LTS |
| VBoxService | 6.1.24 | |
| php | 7.4.25 | 8.1 also installed |
| node | 16.13.0 | 12, 14 also installed via nvm|
| npm | 8.1.0 | |
| python3 | 3.8.10 | |
| pip3 | 20.0.2 | |
| rustc | 1.56.1 | |
| cargo | 1.56.0 | |
| git | 2.25.1 | |
| mysql | 10.3.31 | miriaDB |
| searchd | 2.2.11 | sphinx |
| apache2 | 2.4.41 | |
| imagemagick | 6.9.10 | |
| ffmpeg | 4.2.4 | |

# Development

## building and testing

```
./darebox.sh <command>

        build - Runs packer build generating a provisioned vagrant box 
        test - Runs our custom shell script to see if everything installed correctly
        all - Runs build then test
        clean - Removes build and test artifacts after shuting vms down
        help - Print this info
```

## layout

* **`scripts/`** Scripts used to provision the vm and are called by packer based on there inclusion in `darebox.pkr.hcl`.
  * **`motd/`** Files defining the custom message of the day and are copied by the `motd.sh` script.
* **`test/`** Test vagrant setup. Nothing in here contributes to building or configuring darebox.
  * **`test.sh`** Checks that the programs we want are installed.
  * **`versions.csv`** List of program versions generated by the `test.sh` script.
* **`darebox.sh`** Simple build and test runner
* **`darebox.pkr.hcl`** Packer configuration
